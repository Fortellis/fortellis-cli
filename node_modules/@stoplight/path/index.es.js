function t(t){let e="";return t.absolute&&("file"===t.protocol?(t.drive&&(e+=t.drive),e+="/"):(e+=t.protocol+"://",t.origin&&(e+=t.origin+"/"))),""===(e+=t.path.join("/"))&&(e="."),e}function e(t,n,r,o){this.message=t,this.expected=n,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(e,Error),e.buildMessage=function(t,e){var n={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?u(t.parts[e][0])+"-"+u(t.parts[e][1]):u(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function u(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}return"Expected "+function(t){var e,r,o,u=new Array(t.length);for(e=0;e<t.length;e++)u[e]=(o=t[e],n[o.type](o));if(u.sort(),u.length>0){for(e=1,r=1;e<u.length;e++)u[e-1]!==u[e]&&(u[r]=u[e],r++);u.length=r}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."};var n=function(t,n){n=void 0!==n?n:{};var r,o,u,a,l={},c={Path:0},i=0,s=[function(t,e,n,r){return{protocol:t,origin:e,absolute:!0,...n,...r}},function(t,e,n){return{protocol:t,origin:e,absolute:!0,...n,path:[]}},"http://",k("http://",!0),function(t){return"http"},"https://",k("https://",!0),function(t){return"https"},"",function(){return null},function(t,e,n){return{protocol:t,origin:null,absolute:!0,...e,...n}},"file://",k("file://",!0),"file:",k("file:",!0),function(t){return"file"},function(t,e){return{protocol:"file",origin:null,absolute:!0,...t,...e}},function(){return{drive:null}},/^[A-Za-z]/,x([["A","Z"],["a","z"]],!1,!1),":",k(":",!1),function(t){return{drive:t.toLowerCase()+":"}},function(){return{drive:null}},function(t){return{protocol:null,origin:null,absolute:!1,drive:null,...t}},function(t){return{path:t}},function(t,e){return[t,...e]},function(t){return[t]},".",k(".",!1),"/",k("/",!1),"\\",k("\\",!1),/^[^\/\\]/,x(["/","\\"],!0,!1)],p=[w(";!./ &;&.) &;(.# &;-"),w("%;\"/F#;%/=$;*/4$;./+$8$: $$#\"! )($'#(#'#(\"'#&'#.F &%;\"/<#;%/3$;,/*$8#:!##\"! )(#'#(\"'#&'#"),w(";#.# &;$"),w('%3"""5\'7#/\' 8!:$!! )'),w("%3%\"\"5(7&/' 8!:'!! )"),w('%$;5/&#0#*;5&&&#/"!&,).. &% (/& 8!:)! )'),w("%;'/<#;)/3$;./*$8#:*##\"! )(#'#(\"'#&'#"),w('%3+""5\'7,.) &3-""5%7./\' 8!:/!! )'),w('%;)/2#;./)$8":0""! )("\'#&\'#'),w(";*.# &;+"),w("%;4/& 8!:1! )"),w('%42""5!73/@#24""6475/1$;4/($8#:6#!")(#\'#("\'#&\'#'),w("% (/& 8!:7! )"),w('%;0/1#;./($8":8"! )("\'#&\'#'),w("%;//' 8!:9!! )"),w("%;1/;#;4/2$;//)$8#::#\"\" )(#'#(\"'#&'#./ &%;1/' 8!:;!! )"),w(";2.# &;3"),w('%$;5/&#0#*;5&&&#/"!&,).# & ('),w('%2<""6<7=/,#;4/#$+")("\'#&\'#'),w(" ("),w('2>""6>7?.) &2@""6@7A'),w('4B""5!7C')],h=0,f=[{line:1,column:1}],g=0,b=[],d=0;if("startRule"in n){if(!(n.startRule in c))throw new Error("Can't start parsing from rule \""+n.startRule+'".');i=c[n.startRule]}function k(t,e){return{type:"literal",text:t,ignoreCase:e}}function x(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function $(e){var n,r=f[e];if(r)return r;for(n=e-1;!f[n];)n--;for(r={line:(r=f[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return f[e]=r,r}function v(t,e){var n=$(t),r=$(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function m(t){h<g||(h>g&&(g=h,b=[]),b.push(t))}function w(t){var e,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=t.charCodeAt(e)-32;return n}if((r=function e(n){for(var r,o,u=p[n],a=0,c=[],i=u.length,f=[],g=[];;){for(;a<i;)switch(u[a]){case 0:g.push(s[u[a+1]]),a+=2;break;case 1:g.push(void 0),a++;break;case 2:g.push(null),a++;break;case 3:g.push(l),a++;break;case 4:g.push([]),a++;break;case 5:g.push(h),a++;break;case 6:g.pop(),a++;break;case 7:h=g.pop(),a++;break;case 8:g.length-=u[a+1],a+=2;break;case 9:g.splice(-2,1),a++;break;case 10:g[g.length-2].push(g.pop()),a++;break;case 11:g.push(g.splice(g.length-u[a+1],u[a+1])),a+=2;break;case 12:g.push(t.substring(g.pop(),h)),a++;break;case 13:f.push(i),c.push(a+3+u[a+1]+u[a+2]),g[g.length-1]?(i=a+3+u[a+1],a+=3):(i=a+3+u[a+1]+u[a+2],a+=3+u[a+1]);break;case 14:f.push(i),c.push(a+3+u[a+1]+u[a+2]),g[g.length-1]===l?(i=a+3+u[a+1],a+=3):(i=a+3+u[a+1]+u[a+2],a+=3+u[a+1]);break;case 15:f.push(i),c.push(a+3+u[a+1]+u[a+2]),g[g.length-1]!==l?(i=a+3+u[a+1],a+=3):(i=a+3+u[a+1]+u[a+2],a+=3+u[a+1]);break;case 16:g[g.length-1]!==l?(f.push(i),c.push(a),i=a+2+u[a+1],a+=2):a+=2+u[a+1];break;case 17:f.push(i),c.push(a+3+u[a+1]+u[a+2]),t.length>h?(i=a+3+u[a+1],a+=3):(i=a+3+u[a+1]+u[a+2],a+=3+u[a+1]);break;case 18:f.push(i),c.push(a+4+u[a+2]+u[a+3]),t.substr(h,s[u[a+1]].length)===s[u[a+1]]?(i=a+4+u[a+2],a+=4):(i=a+4+u[a+2]+u[a+3],a+=4+u[a+2]);break;case 19:f.push(i),c.push(a+4+u[a+2]+u[a+3]),t.substr(h,s[u[a+1]].length).toLowerCase()===s[u[a+1]]?(i=a+4+u[a+2],a+=4):(i=a+4+u[a+2]+u[a+3],a+=4+u[a+2]);break;case 20:f.push(i),c.push(a+4+u[a+2]+u[a+3]),s[u[a+1]].test(t.charAt(h))?(i=a+4+u[a+2],a+=4):(i=a+4+u[a+2]+u[a+3],a+=4+u[a+2]);break;case 21:g.push(t.substr(h,u[a+1])),h+=u[a+1],a+=2;break;case 22:g.push(s[u[a+1]]),h+=s[u[a+1]].length,a+=2;break;case 23:g.push(l),0===d&&m(s[u[a+1]]),a+=2;break;case 24:g[g.length-1-u[a+1]],a+=2;break;case 25:a++;break;case 26:for(r=u.slice(a+4,a+4+u[a+3]),o=0;o<u[a+3];o++)r[o]=g[g.length-1-r[o]];g.splice(g.length-u[a+2],u[a+2],s[u[a+1]].apply(null,r)),a+=4+u[a+3];break;case 27:g.push(e(u[a+1])),a+=2;break;case 28:d++,a++;break;case 29:d--,a++;break;default:throw new Error("Invalid opcode: "+u[a]+".")}if(!(f.length>0))break;i=f.pop(),a=c.pop()}return g[0]}(i))!==l&&h===t.length)return r;throw r!==l&&h<t.length&&m({type:"end"}),o=b,u=g<t.length?t.charAt(g):null,a=g<t.length?v(g,g+1):v(g,g),new e(e.buildMessage(o,u),o,u,a)};function r(t){if("string"!=typeof t)throw new Error(`@stoplight/path: Cannot parse ${t} because it is not a string`);return n(t,{})}function o(e){return t(u(r(e)))}function u(t){let e=t.path;e=e.filter(t=>""!==t&&"."!==t);const n=[];for(const r of e)".."===r&&n.length&&".."!==n[n.length-1]?n.pop():".."===r&&t.absolute||n.push(r);return t.path=n,t}function a(t){let e=t.lastIndexOf(".");".."===t&&(e=-1),"."===t&&(e=-1);let n=t,r="";return e>0&&(n=t.slice(0,e),r=t.slice(e)),{name:n,ext:r}}const l=(t,e)=>{const n=u(r(t)).path.pop();if(!n)return"";const{name:o,ext:l}=a(n);return!0===e||e===l?o:`${o}${l}`},c=e=>{const n=u(r(e));return n.path.pop(),t(u(n))},i=t=>{const e=u(r(t)).path.pop();if(!e)return"";const{ext:n}=a(e);return n};function s(t){return r(t).absolute}function p(t){const e=r(t);return"http"===e.protocol||"https"===e.protocol}const h=(...e)=>{if(0===e.length)return".";const n=e.map(r),o=Object.assign({},n[0]);for(let t=1;t<n.length;t++){const r=n[t];if(r.absolute)throw new Error('Cannot join an absolute path "'+e[t]+'" in the middle of other paths.');for(const t of r.path)o.path.push(t)}return t(u(o))};function f(e,n){const o=u(r(n));if(!o.absolute)return t(o);const a=u(r(e));if(o.origin!==a.origin)return t(o);if(!a.absolute)return t(o);if(a.drive!==o.drive)return t(o);const l=Math.min(a.path.length,o.path.length);for(let t=0;t<l&&a.path[0]===o.path[0];t++)a.path.shift(),o.path.shift();return o.path.unshift(...a.path.fill("..")),t({origin:null,drive:null,absolute:!1,protocol:null,path:o.path})}function g(...e){if(0===e.length)return".";const n=u(r(e[e.length-1]));return n.absolute?t(n):h(...e)}const b="/",d=t=>{return null!==r(t).drive},k=t=>r(t).path.filter(Boolean).join("/");function x(t){const[e,n,r,...o]=t.split("/"),u=o.length?`/${o.join("/")}`:void 0;let l,c;return u&&(l=o.find(t=>t.includes(".")))&&(c=a(l).ext),{shortcode:e,orgSlug:n,projectSlug:r,uri:u,file:l,ext:c}}function $({shortcode:t,orgSlug:e,projectSlug:n,uri:r=""}){return[t,e,n,r.replace(/^\//,"")].filter(Boolean).join("/")}export{l as basename,x as deserializeSrn,c as dirname,i as extname,t as format,s as isAbsolute,p as isURL,h as join,o as normalize,r as parse,f as relative,g as resolve,b as sep,$ as serializeSrn,d as startsWithWindowsDrive,k as stripRoot,o as toFSPath};
